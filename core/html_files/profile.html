<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HopeHub | User Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
    body { background: #f4f7fb; color: #1f2937; }

    header {
      background: #0a66c2;
      color: #fff;
      padding: 1.2rem 2rem;
      font-size: 1.4rem;
      font-weight: 600;
    }

    header a {
      float: right;
      color: #fff;
      text-decoration: none;
      font-size: 0.95rem;
      margin-top: 0.3rem;
    }

    header a:hover { text-decoration: underline; }

    .container {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 1rem;
    }

    .profile-card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    .profile-header {
      background: linear-gradient(135deg, #0a66c2, #2ecc71);
      padding: 2rem;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }

    .avatar {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      font-weight: 700;
      color: #0a66c2;
    }

    .profile-header h2 { font-size: 1.8rem; }
    .profile-header p { opacity: 0.9; margin-top: 0.3rem; }

    .profile-body {
      padding: 2rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5rem;
    }

    .info-box {
      background: #f9fafb;
      border-radius: 10px;
      padding: 1.2rem;
      border: 1px solid #e5e7eb;
    }

    .info-box h3 {
      font-size: 1rem;
      margin-bottom: 0.8rem;
      color: #0a66c2;
    }

    .info-item {
      margin-bottom: 0.6rem;
      font-size: 0.95rem;
    }

    .info-item span {
      font-weight: 500;
      color: #374151;
    }

    .status {
      display: inline-block;
      padding: 0.3rem 0.7rem;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .verified { background: #d1fae5; color: #065f46; }

    .actions {
      padding: 1.5rem 2rem;
      border-top: 1px solid #e5e7eb;
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .btn {
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      border: none;
      font-size: 0.9rem;
      cursor: pointer;
      font-weight: 500;
    }

    .primary { background: #0a66c2; color: #fff; }
    .secondary { background: #e5e7eb; color: #111827; }

    footer {
      margin-top: 2rem;
      text-align: center;
      font-size: 0.85rem;
      color: #6b7280;
    }
  </style>
</head>
<body>

<header>
  HopeHub — User Profile
  <a href="login.html" id="loginLink">Login</a>
  <a href="#" id="logoutLink" style="display:none; margin-left:1rem;">Logout</a>
</header>

<div class="container">
  <div class="profile-card">

    <div class="profile-header">
      <div class="avatar" id="avatar">U</div>
      <div>
        <h2 id="name">Loading...</h2>
        <p id="role"></p>
        <span class="status verified" id="status"></span>
      </div>
    </div>

    <div class="profile-body">
      <div class="info-box">
        <h3>Personal Information</h3>
        <div class="info-item"><span>Age:</span> <span id="age"></span></div>
        <div class="info-item"><span>Blood Group:</span> <span id="blood"></span></div>
        <div class="info-item"><span>City:</span> <span id="city"></span></div>
      </div>

      <div class="info-box">
        <h3>Medical Request</h3>
        <div class="info-item"><span>Organ Needed:</span> <span id="organ"></span></div>
        <div class="info-item"><span>Hospital:</span> <span id="hospital"></span></div>
        <div class="info-item"><span>Doctor:</span> <span id="doctor"></span></div>
      </div>
    </div>

    <div class="actions">
      <button class="btn primary">Request Appointment</button>
      <button class="btn secondary">Edit Profile</button>
    </div>

  </div>

  <footer>
    Disclaimer: HopeHub does not allocate organs or provide medical advice. All decisions are handled by authorized hospitals and authorities.
  </footer>
</div>

<script>
  // MOCK AUTH STATE (replace with real auth later)
  const isLoggedIn = localStorage.getItem("hopehub_loggedin") === "true";

  const loginLink = document.getElementById("loginLink");
  const logoutLink = document.getElementById("logoutLink");

  if (isLoggedIn) {
    loginLink.style.display = "none";
    logoutLink.style.display = "inline";
  } else {
    loginLink.style.display = "inline";
    logoutLink.style.display = "none";
  }

  logoutLink.addEventListener("click", () => {
    localStorage.setItem("hopehub_loggedin", "false");
    window.location.href = "login.html";
  });

  // Load profile data
  fetch("http://localhost:5000/api/profile")
    .then(res => res.json())
    .then(data => {
      document.getElementById("name").innerText = data.name;
      document.getElementById("role").innerText = data.role + " • " + data.organNeeded;
      document.getElementById("status").innerText = data.status;
      document.getElementById("age").innerText = data.age;
      document.getElementById("blood").innerText = data.bloodGroup;
      document.getElementById("city").innerText = data.city;
      document.getElementById("organ").innerText = data.organNeeded;
      document.getElementById("hospital").innerText = data.hospital;
      document.getElementById("doctor").innerText = data.doctor;
      document.getElementById("avatar").innerText = data.name.charAt(0);
    });
</script>
<script src="../base/javascipt_files/profile2.js"></script>
<script src="../base/javascipt_files/profile.json"></script>
</body>
</html>
